\ProvidesPackage{gm-math}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xifthen}
\usepackage{faktor}
\usepackage{tikz-cd}
\usepackage{siunitx}
\usepackage{cancel}

\newcommand{\dletter}{\mathrm{d}}
\newcommand{\dd}{\mathop{}\!\dletter}
\newcommand{\D}{\mathop{}\!\dletter}
\newcommand{\pd}{\partial}

\newcommand{\mdd}[2][]{
\ifthenelse{\equal{#1}{}}
    {\def\temp {\dletter}}
    {\def\temp {\dletter^{#1}}}
\mathop{}\!\temp #2}
\newcommand{\mpd}[2][]{
\ifthenelse{\equal{#1}{}}
    {\def\temp {\partial}}
    {\def\temp {\partial^{#1}}}
\temp #2}

\newcommand{\dv}[3][]{\frac{\mdd[#1]{#2}}{\mdd{#3}\ifthenelse{\equal{#1}{}}
    {\def\temp {}}
    {\def\temp {^{#1}}}\temp}}
\newcommand{\pdv}[3][]{\frac{\mpd[#1]{#2}}{\mpd{#3}\ifthenelse{\equal{#1}{}}
    {\def\temp {}}
    {\def\temp {^{#1}}}\temp}}

\newcommand{\ihat}{\hat{\textbf{i}}}
\newcommand{\jhat}{\hat{\textbf{j}}}
\newcommand{\khat}{\hat{\textbf{k}}}

\newcommand{\Grad}{\nabla}
\newcommand{\Div}{\nabla\cdot}
\newcommand{\Curl}{\nabla\times}
\newcommand{\Lapl}{\Delta}

\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\group}[2]{\langle #1 \mid #2 \rangle}
\newcommand{\normsg}{\trianglelefteq}
\newcommand{\ideal}{\triangleleft}
\usepackage{bm}
\renewcommand{\vec}[1]{\if#1\relax\bm{#1}\else\mathbf{#1}\fi}

\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\conj}[1]{\overline{#1}}
\newcommand{\Iso}{\cong}
\newcommand{\inp}[2]{\langle #1, #2 \rangle}
\newcommand{\intprod}{\lrcorner\,}

% \newcommand{\quot}[2]{\faktor{#1}{#2}}
\newcommand{\quot}[2]{#1/#2}

\DeclareMathOperator{\Deg}{deg}
\DeclareMathOperator{\Dim}{dim}
\DeclareMathOperator{\Image}{im}
\DeclareMathOperator{\Ker}{ker}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\Det}{det}
\DeclareMathOperator{\Adj}{adj}
\DeclareMathOperator*{\Inf}{inf}
\DeclareMathOperator*{\Sup}{sup}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\Or}{O}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\GCD}{gcd}
\DeclareMathOperator{\LCM}{lcm}
\DeclareMathOperator{\Obj}{obj}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\rref}{rref}
\DeclareMathOperator{\Hess}{Hess}
\DeclareMathOperator{\Rad}{rad}
\DeclareMathOperator{\Dist}{dist}
\DeclareMathOperator{\Op}{op}
\DeclareMathOperator{\Tr}{tr}
\DeclareMathOperator{\Sgn}{sgn}
\DeclareMathOperator{\Spec}{spec}
\DeclareMathOperator{\Tor}{Tor}
\DeclareMathOperator{\Li}{Li}
\DeclareMathOperator{\Prob}{Pr}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\Log}{Log}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Sym}{sym}
\DeclareMathOperator{\Asym}{asym}
\DeclareMathOperator{\sech}{sech}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\Supp}{supp}
\DeclareMathOperator{\Sn}{sn}
\DeclareMathOperator{\Cn}{cn}
\DeclareMathOperator{\Dn}{dn}
\DeclareMathOperator{\Cof}{cof}
\DeclareMathOperator{\Diam}{diam}
\DeclareMathOperator{\Arg}{arg}
\DeclareMathOperator{\Id}{id}
\DeclareMathOperator{\Ob}{ob}
\DeclareMathOperator{\Mor}{mor}
\DeclareMathOperator{\Dom}{dom}
\DeclareMathOperator{\Cod}{cod}

\let\oldemptyset\emptyset
\let\emptyset\varnothing

\newcommand{\Gal}[2]{\gal(#1/#2)}
\newcommand{\card}{\#}

\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Vect}{\catname{Vect}}
\newcommand{\Grp}{\catname{Grp}}
\newcommand{\PTop}{\catname{PTop}}

\newcommand{\genlegendre}[4]{%
  \genfrac{(}{)}{}{#1}{#3}{#4}%
  \if\relax\detokenize{#2}\relax\else_{\!#2}\fi
}
\newcommand{\legendre}[3][]{\genlegendre{}{#1}{#2}{#3}}
\newcommand{\dlegendre}[3][]{\genlegendre{0}{#1}{#2}{#3}}
\newcommand{\tlegendre}[3][]{\genlegendre{1}{#1}{#2}{#3}}

% allow augmented matrix
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother

\makeatletter
\newcommand*\owedge{\mathpalette\@owedge\relax}
\newcommand*\@owedge[1]{%
  \mathbin{%
    \ooalign{%
      $#1\m@th\bigcirc$\cr
      \hidewidth$#1\m@th\wedge$\hidewidth\cr
    }%
  }%
}
\makeatother
