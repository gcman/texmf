\ProvidesPackage{gm-math}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{xifthen}
\usepackage{faktor}
\usepackage{tikz-cd}
\usepackage{siunitx}
\usepackage{cancel}

\newcommand{\dd}[2][]{
\ifthenelse{\equal{#1}{}}
    {\def\temp {\mathrm{d}}}
    {\def\temp {\mathrm{d}^{#1}}}
\mathop{}\!\temp #2}
\newcommand{\pd}[2][]{
\ifthenelse{\equal{#1}{}}
    {\def\temp {\partial}}
    {\def\temp {\partial^{#1}}}
\temp #2}
\newcommand{\dv}[3][]{\frac{\dd[#1]{#2}}{\dd{#3}\ifthenelse{\equal{#1}{}}
    {\def\temp {}}
    {\def\temp {^{#1}}}\temp}}
\newcommand{\pdv}[3][]{\frac{\pd[#1]{#2}}{\pd{#3}\ifthenelse{\equal{#1}{}}
    {\def\temp {}}
    {\def\temp {^{#1}}}\temp}}

\newcommand{\ihat}{\hat{\textbf{i}}}
\newcommand{\jhat}{\hat{\textbf{j}}}
\newcommand{\khat}{\hat{\textbf{k}}}

\newcommand{\Grad}{\nabla}
\newcommand{\Div}{\nabla\cdot}
\newcommand{\Curl}{\nabla\times}
\newcommand{\Lapl}{\Delta}

\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}
\newcommand{\set}[1]{\left\{#1\right\}}
\newcommand{\group}[2]{\langle #1 \mid #2 \rangle}
\newcommand{\normsg}{\trianglelefteq}
\usepackage{bm}
\renewcommand{\vec}[1]{\if#1\relax\bm{#1}\else\mathbf{#1}\fi}

\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\conj}[1]{\overline{#1}}
\newcommand{\Iso}{\cong}
\newcommand{\inp}[2]{\langle #1, #2 \rangle}

\newcommand{\quot}[2]{\faktor{#1}{#2}}

\DeclareMathOperator{\Deg}{deg}
\DeclareMathOperator{\Dim}{dim}
\DeclareMathOperator{\Image}{im}
\DeclareMathOperator{\Ker}{ker}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\Det}{det}
\DeclareMathOperator{\Adj}{adj}
\DeclareMathOperator*{\Inf}{inf}
\DeclareMathOperator*{\Sup}{sup}
\DeclareMathOperator{\Hom}{hom}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\GCD}{gcd}
\DeclareMathOperator{\LCM}{lcm}
\DeclareMathOperator{\Obj}{obj}
\DeclareMathOperator{\Frob}{Frob}
\DeclareMathOperator{\rref}{rref}
\DeclareMathOperator{\Hess}{Hess}
\DeclareMathOperator{\Rad}{rad}
\DeclareMathOperator{\Dist}{dist}
\DeclareMathOperator{\Op}{op}
\DeclareMathOperator{\Tr}{tr}
\DeclareMathOperator{\Sgn}{sgn}
\DeclareMathOperator{\Spec}{spec}

\let\oldemptyset\emptyset
\let\emptyset\varnothing

\DeclareMathOperator{\gal}{Gal}
\newcommand{\Gal}[2]{\gal(#1/#2)}

\renewcommand{\Re}{\operatorname{Re}}
\renewcommand{\Im}{\operatorname{Im}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\renewcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\catname}[1]{{\normalfont\textbf{#1}}}
\newcommand{\Set}{\catname{Set}}
\newcommand{\Vect}{\catname{Vect}}
\newcommand{\Grp}{\catname{Grp}}
\newcommand{\PTop}{\catname{PTop}}

\newcommand{\genlegendre}[4]{%
  \genfrac{(}{)}{}{#1}{#3}{#4}%
  \if\relax\detokenize{#2}\relax\else_{\!#2}\fi
}
\newcommand{\legendre}[3][]{\genlegendre{}{#1}{#2}{#3}}
\newcommand{\dlegendre}[3][]{\genlegendre{0}{#1}{#2}{#3}}
\newcommand{\tlegendre}[3][]{\genlegendre{1}{#1}{#2}{#3}}

% allow augmented matrix
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother